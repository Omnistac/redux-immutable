{"version":3,"sources":["../src/combineReducers.js"],"names":["reducers","getDefaultState","Immutable","Map","reducerKeys","Object","keys","inputState","action","process","env","NODE_ENV","warningMessage","console","error","ret","withMutations","temporaryState","forEach","reducerName","reducer","currentDomainState","get","nextDomainState","set"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;kBAKe,UAACA,QAAD,EAA4E;AAAA,MAAzDC,eAAyD,uEAA5BC,oBAAUC,GAAkB;;AACzF,MAAMC,cAAcC,OAAOC,IAAP,CAAYN,QAAZ,CAApB;;AAEA;AACA,SAAO,YAA8E;AAAA,QAA7EO,UAA6E,uEAArDN,iBAAqD;AAAA,QAAlCO,MAAkC;;AACnF;AACA,QAAIC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,UAAMC,iBAAiB,wDAAwCL,UAAxC,EAAoDP,QAApD,EAA8DQ,MAA9D,CAAvB;;AAEA,UAAII,cAAJ,EAAoB;AAClB;AACAC,gBAAQC,KAAR,CAAcF,cAAd;AACD;AACF;;AAED,QAAMG,MAAMR,WACTS,aADS,CACK,UAACC,cAAD,EAAoB;AACjCb,kBAAYc,OAAZ,CAAoB,UAACC,WAAD,EAAiB;AACnC,YAAMC,UAAUpB,SAASmB,WAAT,CAAhB;AACA,YAAME,qBAAqBJ,eAAeK,GAAf,CAAmBH,WAAnB,CAA3B;AACA,YAAMI,kBAAkBH,QAAQC,kBAAR,EAA4Bb,MAA5B,CAAxB;;AAEA,0CAAkBe,eAAlB,EAAmCJ,WAAnC,EAAgDX,MAAhD;;AAEAS,uBAAeO,GAAf,CAAmBL,WAAnB,EAAgCI,eAAhC;AACD,OARD;AASD,KAXS,CAAZ;;AAaA;AACA;AACA;AACA;AACA;AACA;AACAnB,gBAAYc,OAAZ,CAAoB,uBAAe;AACjCH,UAAII,WAAJ,IAAmBJ,IAAIO,GAAJ,CAAQH,WAAR,CAAnB;AACD,KAFD;;AAIA,WAAOJ,GAAP;AACD,GAnCD;AAoCD,C","file":"combineReducers.js","sourcesContent":["import Immutable from 'immutable';\nimport {\n  getUnexpectedInvocationParameterMessage,\n  validateNextState\n} from './utilities';\n\nexport default (reducers: Object, getDefaultState: ?Function = Immutable.Map): Function => {\n  const reducerKeys = Object.keys(reducers);\n\n  // eslint-disable-next-line space-infix-ops\n  return (inputState: ?Function = getDefaultState(), action: Object): Immutable.Map => {\n    // eslint-disable-next-line no-process-env\n    if (process.env.NODE_ENV !== 'production') {\n      const warningMessage = getUnexpectedInvocationParameterMessage(inputState, reducers, action);\n\n      if (warningMessage) {\n        // eslint-disable-next-line no-console\n        console.error(warningMessage);\n      }\n    }\n\n    const ret = inputState\n      .withMutations((temporaryState) => {\n        reducerKeys.forEach((reducerName) => {\n          const reducer = reducers[reducerName];\n          const currentDomainState = temporaryState.get(reducerName);\n          const nextDomainState = reducer(currentDomainState, action);\n\n          validateNextState(nextDomainState, reducerName, action);\n\n          temporaryState.set(reducerName, nextDomainState);\n        });\n      });\n\n    // This is a hack to serve Trumid during the transitional period\n    // from Omnistac-UI to trumid-fe.\n    // Because we used redux-immutable in Omnistac-UI and plain javascript\n    // in trumid-fe, we depend on destructuring state in the latter.\n    // By tacking on plain field references to the Immutable.Map, this will work\n    // without having to make a special selector depending on app platform.\n    reducerKeys.forEach(reducerName => {\n      ret[reducerName] = ret.get(reducerName);\n    });\n\n    return ret;\n  };\n};\n"]}